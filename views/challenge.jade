doctype html
html
	head
		title Challenge #{challengeId}

		link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Montserrat')
		link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Lato')

		link(rel='stylesheet', href='../css/codemirror.css')
		link(rel='stylesheet', href='../css/light-table.css')
		link(rel='stylesheet', href='../css/lint.css')
		link(rel='stylesheet', href='../css/normalize.css')
		link(rel='stylesheet', href='../css/style.css')

		script(src='//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js')

		script(src='../js/codemirror.js')
		script(src='../js/javascript-lint.js')
		script(src='../js/javascript.js')
		script(src='../js/jshint.js')
		script(src='../js/lint.js')

	body

		div(class='grid grid-pad')
			div(class='col-1')
				h2 Challenge #{challengeId}: #{title}
				p #{problem}

			div(class='col-2-3 row-1-2')
				textarea(id='editor')
				button(class='button' id='emailButton' type='button') Email
				button(class='button' id='submitButton' type='button') Submit
			div(class='col-1-3 row-1-2')
				select(id='codeUnitList')
					option
						selected
						value='All'
				div(id='results')
					h2 Results

			div(class='col-1' id='console')
				h2 Console

		script(src='../js/console_capture.js')
		script(src='../js/challenge.js')
		script(src='../js/cm-resize.js')
		script.
			var outputArray = !{ JSON.stringify(outputArray) };
			var inputArray = !{ JSON.stringify(inputArray) };

			var challengeId = Number(#{challengeId});

			var functionNames = !{ JSON.stringify(functionNames) };
			addFunctionOptions(functionNames);

			$('#emailButton').click(function() {
				test.apply(null, strings)

				var personsCode = editor.getValue();
				personsCode = personsCode.replace(/\n/g, '%0D%0A');
				personsCode = personsCode.replace(/\t/g, '    ');
				var personsSubject = #{title}

				window.open(
					'mailto:first.middle.last.year@dartmouth.edu?'
					+ '&subject=Challenge ' + #{challengeId}
					+ '&body=' + personsCode
				);
			});
