<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre 
   { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; }
td.lineNumbers { border-right: 1px solid #AAAAAA; text-align: right; color: #AAAAAA; padding-right: 5px; padding-left: 5px; }
td.sourceCode { padding-left: 5px; }
code.sourceCode span.kw { color: #007020; font-weight: bold; } 
code.sourceCode span.dt { color: #902000; }
code.sourceCode span.dv { color: #40a070; }
code.sourceCode span.bn { color: #40a070; }
code.sourceCode span.fl { color: #40a070; }
code.sourceCode span.ch { color: #4070a0; }
code.sourceCode span.st { color: #4070a0; }
code.sourceCode span.co { color: #60a0b0; font-style: italic; }
code.sourceCode span.ot { color: #007020; }
code.sourceCode span.al { color: red; font-weight: bold; }
code.sourceCode span.fu { color: #06287e; }
code.sourceCode span.re { }
code.sourceCode span.er { color: red; font-weight: bold; }
/*]]>*/
  </style>
</head>
<body>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

<link rel="stylesheet" href="http://www.cs.dartmouth.edu/~cs1/azul.css" type="text/css" />


<div id = "menubar">
<ul>
<li><a href="http://www.cs.dartmouth.edu/~cs1/syllabus.html">Syllabus</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/schedule.html">Schedule</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/shortassign/short_assignments.html">Short assignments</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/labs/lab_assignments.html">Labs</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/exams.html">Exams</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/software.html">Course software</a>
<li> <a href="http://greenteapress.com/thinkpython/thinkpython.html">Book</a>
<li><A HREF="&#109;&#97;&#105;&#108;&#116;&#111;&#58;%63%73%31%68%65%6C%70%40%63%73%2E%64%61%72%74%6D%6F%75%74%68%2E%65%64%75">Get help</A>
</ul>
</div>

<div id = "termtitle"> CS 1:  Winter 2012 </div> 
<h1 id="short-assignment-4">Short Assignment 4</h1>
<p><a
href="http://www.cs.dartmouth.edu/~cs1/shortassign/stringart/sa_stringart.html">Short Assignment 4</a> is due on Wednesday. (We don't have class on Monday because of Martin Luther King Day.)</p>
<h1 id="if-statements-continued">if-statements, continued</h1>
<p>Last time, we saw how to use an if-statement if we want something to happen if a condition is <code>True</code>. There's more to if-statements, however.</p>
<h2 id="else-statements">else-statements</h2>
<p>Frequently, you want to execute one set of lines of code if a condition holds, but execute a <em>different</em> set of lines if that condition does not hold. In this case, you can use an <strong>else-statement</strong>:</p>
<pre class="sourceCode"><code class="sourceCode python">temperature = <span class="dv">35</span><br /><span class="kw">if</span> temperature &lt;= <span class="dv">32</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's freezing&quot;</span><br /><span class="kw">else</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's not so cold.&quot;</span></code></pre>
<p>An else-statement must follow an if-statement at the same level of indentation, and it has no condition after it, since it is executed if the condition of the matching if statement is <code>False</code>. Note that there's a colon after <code>else</code>.</p>
<h2 id="elif-statements">elif-statements</h2>
<p>Sometimes you want to check if some condition is <code>True</code> only if some series of previous conditions were all <code>False</code>. You can use <code>elif</code>, which is short for &quot;else if.&quot; Like in <a href="elif.py">elif.py</a>:</p>
<pre class="sourceCode"><code class="sourceCode python">temperature = <span class="dv">72</span><br /><br /><span class="kw">if</span> temperature &lt;= <span class="dv">32</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's freezing.&quot;</span><br /><span class="kw">elif</span> temperature &lt;= <span class="dv">50</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's cool.&quot;</span><br /><span class="kw">elif</span> temperature &lt;= <span class="dv">75</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's warm.&quot;</span><br /><span class="kw">else</span>:<br />    <span class="kw">print</span> <span class="st">&quot;It's hot.&quot;</span></code></pre>
<h2 id="a-larger-example">A larger example</h2>
<p>Here's a larger example that shows if-statements with and without an else-part. It's in <a href="pulse_circle.py">pulse_circle.py</a>:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> cs1lib <span class="ch">import</span> *<br /><br /><span class="kw">def</span> pulse_circle():<br />    radius= <span class="dv">1</span><br />    growing = <span class="ot">True</span><br /><br />    disable_stroke()<br />    enable_smoothing()<br /><br />    <span class="kw">while</span> not window_closed():<br />        <span class="co"># draw current frame onto a &quot;hidden&quot; background image</span><br /><br />        clear()<br /><br />        set_fill_color(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)  <span class="co"># set the fill color to red</span><br />        draw_circle(<span class="dv">200</span>, <span class="dv">200</span>, radius)<br /><br />        set_fill_color(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)  <span class="co"># blue</span><br />        draw_circle(<span class="dv">200</span>, <span class="dv">200</span>, radius / <span class="dv">2</span>)<br /><br />        set_fill_color(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)  <span class="co"># yellow</span><br />        draw_circle(<span class="dv">200</span>, <span class="dv">200</span>, radius / <span class="dv">4</span>)<br /><br />        <span class="co"># copy the hidden image into the window</span><br />        request_redraw()<br /><br />        <span class="co"># Wait before drawing the next frame,</span><br />        <span class="co">#  so the user can see the frame just drawn</span><br />        sleep(.<span class="dv">02</span>)<br /><br />        <span class="co"># update the state for the next frame</span><br />        <span class="kw">if</span> growing:<br />            radius = radius + <span class="dv">2</span><br />        <span class="kw">else</span>:<br />            radius = radius - <span class="dv">2</span><br /><br />        <span class="kw">if</span> radius &gt;= <span class="dv">200</span> or radius &lt;=<span class="dv">1</span>:<br />            growing = not growing<br /><br />        sleep(.<span class="dv">02</span>)<br /><br />start_graphics(pulse_circle)</code></pre>
<h1 id="more-on-functions">More on functions</h1>
<h2 id="passing-parameters-to-functions">Passing parameters to functions</h2>
<p>A function needs to have information in order to do its job. Where does this information come from? One way to get information into a function is through <strong>parameters</strong>. We have already seen several examples of calling functions that take parameters. Here's one:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> math <span class="ch">import</span> sqrt<br /><span class="kw">print</span> sqrt(<span class="fl">4.0</span>)</code></pre>
<p>The <code>sqrt</code> function requires one parameter, a float, that it will use to compute the function's return value. That is, the <code>sqrt</code> function gets some of the information it needs to do its job—namely, the number of which it is to compute the square root—through a parameter.</p>
<p>Here's another function we've seen that takes parameters:</p>
<pre class="sourceCode"><code class="sourceCode python">set_fill_color(<span class="fl">1.0</span>, <span class="fl">0.0</span>, <span class="fl">0.0</span>)   <span class="co"># set the current fill color to red</span></code></pre>
<p>The <code>set_fill_color</code> function requires three parameters: the fractions of red, green, and blue in the fill color you would like future drawing commands to use.</p>
<p>The functions <em>you</em> have defined so far have taken no parameters. They did not need any information in order to do their jobs. Now let's see how to define functions that take parameters.</p>
<p>You put the parameters between the parentheses in the header. Each parameter is actually a special variable. We call a parameter that appears in a function's header a <strong>formal parameter</strong>. If a function takes more than one formal parameter, we separate them by commas in the function's header.</p>
<p>Here is an example of a program, <a href="square_function.py">square_function.py</a>, that contains a function to draw the outline of a square:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> cs1lib <span class="ch">import</span> *<br /><br /><span class="co"># Draw a square with upper left x, y and side length s (all ints),</span><br /><span class="co"># using only draw_line.</span><br /><span class="kw">def</span> draw_square(x, y, s):<br />    draw_line(x, y, x + s, y)<br />    draw_line(x + s, y, x + s, y + s)<br />    draw_line(x + s, y + s, x, y + s)<br />    draw_line(x, y + s, x, y)<br /><br /><span class="co"># The main function, which will be called when start_graphics is called.</span><br /><span class="kw">def</span> main():<br />    clear()<br />    draw_square(<span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">50</span>)<br /><br />start_graphics(main)</code></pre>
<p>The parameters for <code>draw_square</code> are three ints. The formal parameters are variables named <code>x</code>, <code>y</code>, and <code>s</code>. When <code>draw_square</code> is called, the first value in the function call, 100, is copied into the first formal parameter in the function header, <code>x</code>. The second value in the function call, 120, is copied into the second formal parameter in the function header, <code>y</code>. The third value in the function call, 50, is copied into the third formal parameter, <code>s</code>.</p>
<p>After Python has copied these three values into the formal parameters, it sets the program counter to the first line of the body of <code>draw_square</code>. At this point, there are three parameters available: <code>x</code>, <code>y</code>, and <code>s</code>. These parameters work just like any other variables; we can use them to compute expressions, or even change their values.</p>
<p>We call the numbers 100, 120, 50 that are actually passed into the function <strong>actual parameters</strong>. When a function is called, the values of the actual parameters are computed and <strong>copied</strong> into the formal parameters. The actual parameters are <strong>values</strong> (or expressions) in the function call instruction, and the formal parameters are the <strong>variables</strong> used in the function itself.</p>
<p>Put another way:</p>
<blockquote>
<p>A formal parameter is a variable that is initialized with a copy of an actual parameter at the point of call.</p>
</blockquote>
<p>Also:</p>
<blockquote>
<p>The values of the actual parameters are copied into the corresponding formal parameters, position by position, left to right.</p>
</blockquote>
<p>In our example, because 100 is the first actual parameter, its value is copied into the first formal parameter, <code>x</code>. Because 120 is the second actual parameter, its value is copied into the second formal parameter, <code>y</code>. And because 50 is the third actual parameter, its value is copied into the third formal parameter, <code>s</code>.</p>
<h2 id="some-functions-return-values">Some functions return values</h2>
<p>Expressions compute values and make those values available for further use. Functions can also compute values and make those values available for further use. They don't <em>have</em> to do that, but they <em>can</em>. For example, the <code>sqrt</code> function returns a value, which is the square root of the value of the actual parameter passed to it. When a function computes a value that is available for further use, we say that the function <strong>returns</strong> the value.</p>
<blockquote>
<p>Anywhere a value is needed, a call of a function that returns the right type of value (for example, an int, a long, a string, or a boolean) can appear.</p>
</blockquote>
<p>For example, in a print statement, we can print the value returned by a function call:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> math <span class="ch">import</span> sqrt<br /><span class="kw">print</span> sqrt(<span class="dv">4</span>)    <span class="co"># print a float that is (approximately) the square root of 4</span></code></pre>
<p>Let's dissect what I mean by &quot;Anywhere a value is needed, a call of a function that returns the right type of value can appear.&quot; Consider this line of code:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">print</span> <span class="fl">8.0</span> + <span class="fl">12.0</span></code></pre>
<p>Of course, this code outputs 20.0. Now, if we were to call <code>int(8.48528137423857)</code>, the value returned by the call of <code>int</code> would be 8.0, so let's change the code to</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">print</span> <span class="dt">int</span>(<span class="fl">8.48528137423857</span>) + <span class="fl">12.0</span></code></pre>
<p>Do you see what I've done here? We needed a float value as the left operand of <code>+</code>. Instead of 8.0, we used <code>int(8.48528137423857)</code>: a call to the <code>int</code> function, which returns the value 8. Why did I choose <code>int(8.48528137423857)</code>? Because I'm going to go a step further. The <code>sqrt</code> function, when passed the actual parameter 72, returns the float value 8.48528137423857. So we can change the code to</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">print</span> <span class="dt">int</span>(sqrt(<span class="dv">72</span>)) + <span class="fl">12.0</span></code></pre>
<p>And this means <em>exactly the same thing</em>. We needed the value 8.48528137423857, and instead we used the function call <code>sqrt(72)</code>.</p>
<h2 id="functions-that-return-random-values">Functions that return random values</h2>
<p>If you recall the <a href="../../shortassign/logo/mystery.py">mystery.py</a> program from <a href="../../shortassign/logo/sa_logo.html">Short Assignment 1</a>, it repeatedly drew ellipses at random locations in the window. How do we get a random value? We call the function <code>randint</code> from the <code>random</code> module. For example:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> random <span class="ch">import</span> randint<br /><span class="kw">print</span> randint(<span class="dv">5</span>, <span class="dv">20</span>)</code></pre>
<p>This line prints a random integer between 5 and 20, inclusive. In other words, it's equally likely to print any integer in the range from 5 to 20.</p>
<p>What if you want a random floating-point number? Call <code>uniform</code>, also from the <code>random</code> module:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> random <span class="ch">import</span> uniform<br /><span class="kw">print</span> uniform(<span class="fl">2.0</span>, <span class="fl">4.0</span>)  <span class="co"># print a random float between 2.0 and 4.0 </span></code></pre>
<p>Here's a larger example of the use of <code>uniform</code> to return a random float in some range. This program makes use of a cool feature of graphics: when we set a fill color, we can supply a fourth parameter, which is the <strong>alpha</strong> value, saying how transparent the object is. I won't go into details about alpha values for now. Instead, focus on how we call <code>uniform</code> to set red, green, and blue values, and on how we call <code>randint</code> to determine locations.</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="co">#  Draw random pastel circles on the screen. </span><br /><span class="co">#  Based on an example by Fabio Pellacini</span><br /><span class="co">#  Python version by Devin Balkcom, Feb 2011</span><br /><br /><span class="ch">from</span> cs1lib <span class="ch">import</span> *<br /><span class="ch">from</span> random <span class="ch">import</span> uniform, randint<br /><br /><span class="kw">def</span> random_circles():<br /><br />    <span class="co"># Clear the screen and set the pen color to black before we start</span><br />    <span class="co"># the animation loop.  These functions will only be called once.</span><br /><br />    clear()<br />    set_stroke_color(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)<br /><br />    enable_smoothing()<br /><br />    <span class="kw">while</span> not window_closed():<br /><br />        <span class="co"># fade-out effect</span><br />        set_fill_color(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, .<span class="dv">05</span>)  <span class="co"># white, with opacity .05</span><br />        draw_rectangle(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">400</span>, <span class="dv">400</span>) <span class="co"># draw a semi-transparent rectangle</span><br /><br />        <span class="co"># Pick random red, green, and blue color components</span><br /><br />        r = uniform(.<span class="dv">5</span>, <span class="dv">1</span>)    <br />        g = uniform(.<span class="dv">5</span>, <span class="dv">1</span>)    <br />        b = uniform(.<span class="dv">5</span>, <span class="dv">1</span>)    <br /><br />        <span class="co"># set the fill color using the random color components  </span><br />        set_fill_color(r, g, b)    <br /><br />        <span class="co"># pick random pixel coordinates </span><br />        x = randint(<span class="dv">0</span>, <span class="dv">400</span>)<br />        y = randint(<span class="dv">0</span>, <span class="dv">400</span>)<br /><br />        <span class="co"># draw a circle of radius 50 at the random coordinates</span><br />        draw_circle(x, y, <span class="dv">50</span>)<br /><br />        request_redraw()<br />        sleep(.<span class="dv">02</span>)<br /><br /><span class="co"># Run the start_graphics function to open up a graphics window,</span><br /><span class="co"># and tell the graphics library to run the random_circles function:</span><br />start_graphics(random_circles)</code></pre>
<p>You might notice that the structure of this animation loop is subtly different from previous animation loops. Until this program, we've used this pattern:</p>
<ol style="list-style-type: decimal">
<li>Create state variables with initial values.</li>
<li>Draw the current frame and sleep.</li>
<li>Update the state variables for the next frame.</li>
</ol>
<p>But this program creates the state values and changes them at the beginning of the loop. This structure makes sense since the current values of the state variables do not depend in any way on the previous values. They are just picked randomly. There's no need to set initial values for the state outside the loop in this particular case.</p>
<p>You might wonder how the <code>uniform</code> and <code>randint</code> functions can come up with random numbers. They don't. They compute what we call <strong>pseudorandom</strong> numbers. Pseudorandom numbers are generated from mathematical sequences of numbers that change values in ways that have the properties of random sequences, but are actually generated from a formula.</p>
<!-- Is it good or bad that numbers generated by a pseudorandom number -->
<!-- generator algorithm aren't really random?  If you really and truly -->
<!-- needed random numbers, then it's bad.  But it can be good.  Suppose -->
<!-- you have a program that misbehaves in some way, and you notice the bad -->
<!-- behavior after having generated and used several pseudorandom numbers. -->
<!-- It's always easier to debug a program if you can get it to repeat the -->
<!-- bad behavior.  Because you get the same sequence again from the random -->
<!-- number generator by starting it in the same place, you'll get the very -->
<!-- same run again, making it much easier to debug the program. -->

<h2 id="built-in-functions-len-int-float-str">Built-in functions: <code>len</code>, <code>int</code>, <code>float</code>, <code>str</code></h2>
<p><code>len</code> returns the length of a string, as an int value.</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">print</span> <span class="dt">len</span>(<span class="st">&quot;eggplant&quot;</span>)    <span class="co"># prints the number 8</span></code></pre>
<p>As we've seen, <code>int</code> converts from some other type to an int. If the number is a float, any part of the number to the right of the decimal point is truncated (dropped). If the number is too large to store in an int, Python returns a long int instead.</p>
<p>If you try to convert from a string that contains characters that represent something other than a number, <code>int</code> will fail and your program will terminate. <code>print int(&quot;123&quot;)</code> will work. <code>print int(&quot;buffalo&quot;)</code> will not.</p>
<p><code>float</code> and <code>str</code> convert to float and string types, respectively, and work as you might expect.</p>
<h2 id="defining-your-own-functions-with-return-values">Defining your own functions with return values</h2>
<p>When the value returned by a function is needed, the function is called. The current value of the program counter is saved. Then the program counter is set to the first line of the function. Python executes the body of the function. The function <strong>returns</strong> and the program counter is set to its value before the function call when one of two things happens:</p>
<p>1, the program counter gets to the end of the body, 2. <em>or</em> the program counter gets to a return-statement.</p>
<p>Executing a return-statement does two things:</p>
<ol style="list-style-type: decimal">
<li><code>return</code> returns the value following <code>return</code> (if any) to the calling code.</li>
<li><code>return</code> <em>immediately</em> stops execution of the body of the function and resumes execution at the point of call. That is, the program counter goes back to just after the function was called.</li>
</ol>
<p>Here's a really simple example:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> compute_four():<br />    <span class="kw">print</span> <span class="st">&quot;Your wish is my command!  I compute four!&quot;</span><br />    <span class="kw">return</span> <span class="dv">24</span> / <span class="dv">4</span> - <span class="dv">2</span><br /><br /><span class="kw">print</span> compute_four()</code></pre>
<p>As we now know, anywhere a value is needed, you can substitute an expression or function call that returns a value. For example, you could do something like this:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> math <span class="ch">import</span> sqrt<br /><br /><span class="kw">def</span> calculate_four():<br />    <span class="kw">print</span> <span class="st">&quot;Your wish is my command!  I compute four!&quot;</span><br />    <span class="kw">return</span> sqrt(<span class="fl">4.0</span>) + <span class="dv">2</span><br /><br /><span class="kw">print</span> calculate_four()</code></pre>
<p>Here's one more example.</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> get_me_four():<br />    <span class="kw">return</span> <span class="dv">24</span> / <span class="dv">4</span> - <span class="dv">2</span><br />    <span class="kw">print</span> <span class="st">&quot;I computed the value!&quot;</span>   <span class="co"># this line is &quot;dead code&quot; and never reached</span><br /><br /><span class="kw">print</span> get_me_four()</code></pre>
<p>The line <code>print &quot;I computed the value!&quot;</code> is <em>not</em> printed on the screen, since the return-statement before the print-statement will always immediately give control back to the calling function by setting the value of the program counter. In fact, Python will warn you that you have done something silly. Lines of code that cannot be reached are called <strong>dead code</strong>. Normally, you should not include dead code in a program.</p>
<h3 id="functions-do-not-change-actual-parameters">Functions do not change actual parameters</h3>
<p>Because the value of the actual parameter is <em>copied</em> into the formal parameter variable, the actual parameter itself is never affected by the function. That's true even if the function assigns to the formal parameter. Here's an example, in <a href="add_five.py">add_five.py</a>:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> add_five(some_number):<br />    some_number = some_number + <span class="dv">5</span><br />    <span class="kw">return</span> some_number<br /><br />four = <span class="dv">4</span><br />add_five(four)<br /><span class="kw">print</span>(four)            <span class="co"># prints the value 4</span><br /><span class="kw">print</span> add_five(four)   <span class="co"># prints the value 9</span></code></pre>
<h3 id="functions-can-return-only-a-single-value">Functions can return only a single value</h3>
<p>What if you want to compute two values with a single function? For example, you might hope to use a single function to compute <em>both</em> the area of a circle and its circumference, given the radius. But you can't use two return-statements to return the two values; the function would return control to the caller as soon as the program counter reached the first return-statement. <em>Immediately.</em></p>
<p>There is a sneaky way to &quot;sort of&quot; return multiple values that we'll see later in the course, using a Python data type called a &quot;tuple.&quot; For now, you will just have to be content with returning a single value from a function.</p>
<p>Of course, if you have if-statements or other conditionally executed code, you might still have multiple return-statements, as in <a href="8-ball.py">8-ball.py</a>:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> random <span class="ch">import</span> uniform<br /><br /><span class="kw">def</span> cheap_magic_8_ball():<br />    r = uniform(<span class="dv">0</span>, <span class="dv">4</span>)<br /><br />    <span class="kw">if</span> r &gt; <span class="dv">3</span>:<br />        <span class="kw">return</span> <span class="st">&quot;Most likely&quot;</span><br />    <span class="kw">elif</span> r &gt; <span class="dv">2</span>:<br />        <span class="kw">return</span> <span class="st">&quot;Ask again later&quot;</span><br />    <span class="kw">elif</span> r &gt; <span class="dv">1</span>:<br />        <span class="kw">return</span> <span class="st">&quot;Don't count on it&quot;</span><br />    <span class="kw">else</span>:<br />        <span class="kw">return</span> <span class="st">&quot;No&quot;</span><br /><br /><span class="kw">print</span> cheap_magic_8_ball()</code></pre>
<h1 id="bugs">Bugs</h1>
<p>Even the best programmers make mistakes. Mistakes in programs that lead to incorrect behavior are called <a href="http://en.wikipedia.org/wiki/Software_bug">software bugs</a>. Some of these mistakes are simple typing errors, or they might be due to swapping parameters in a function call. Other errors are more fundamental logical errors due to an incomplete understanding of the problem being solved.</p>
<p>It is not unusual to spend much more time finding a single bug than it took to write the entire program. So try to avoid bugs as you design and implement your program.</p>
<ol style="list-style-type: decimal">
<li><p>Understand the problem as completely as possible before you sit down at the computer. What does the program need to do, and in what order? What data will be important? What functions will you need to write? In the Prudential building in Boston, it reads &quot;The future belongs to those who prepare for it.&quot; So does programming. Don't rush to code. First, understand what problem you're trying to solve, and what strategy you're using to solve it.</p></li>
<li><p>Write a solution with pencil and paper. This can be tough, but is a very good skill to have; it forces you to think things through. Exams and job interviews will not provide you with Eclipse.</p></li>
<li><p>Implement just a piece of the solution at a time on the computer, and test each part. There are two ways to test: mentally, and by running the code. Both are good. Do a mental test first: in your head, walk through the code, making sure that you understand exactly what is happening, what values of variables are, and where the program counter is. When you have finished acting like a computer, then run the code. If the computer doesn't run the code the way you did, then someone made a mistake. Hint: Chances are overwhelming that it wasn't the computer.</p></li>
</ol>
<h2 id="debugging">Debugging</h2>
<p>We often observe a bug for the first time when we run the program, and notice unexpected behavior. Catching and fixing bugs requires you to act like a detective: something that should have been a normal situation has gone wrong. Why? Debugging is as much an art as a science, but here is a procedure that can help.</p>
<ol style="list-style-type: decimal">
<li><p>Ask yourself what you expected. What actually happened? What's the difference between what you expected and what you got? Be as precise as possible. Not, &quot;the circle is in the wrong place,&quot; but &quot;I expected a circle to be drawn at the location 200, 100, but it seems to have been drawn at 100, 200.&quot; Precision can solve the problem immediately sometimes. Aha! Perhaps I swapped the <em>x</em>- and <em>y</em>-coordinates somewhere.</p></li>
<li><p>Find the earliest point in the code where something unexpected happens. Bugs often have a cascading effect: once one bug happens, strange behavior can follow. So you want to find the first place where something went haywire. Based on what you expected to happen and what actually happened, come up with a few possible places where the earliest problem could have occurred.</p></li>
<li><p>Step through the code mentally. Start at the first executable line and work your way through, writing down the values of variables as you go. Be absolutely certain about the <em>type</em> of the value that you intend to be stored in each variable, and make sure that this is the type actually stored.</p></li>
<li><p>Use the debugging tool in Eclipse to step through the code. Watch variable values closely, and watch where the program counter moves to. The minute something happens that you didn't expect, figure out precisely what occurred.</p></li>
</ol>
<p>Once you've found where a bug in your code is, correcting it is usually fairly easy. When you email cs1help for help, we expect you to briefly explain how you've applied the debugging approach to your problem.</p>
<h3 id="the-eclipse-debugging-tool">The Eclipse debugging tool</h3>
<p>On the upper right corner of your Eclipse window you will see the word &quot;PyDev&quot; and to the right of that, two little arrows, like this: &gt;&gt;. If you click on those arrows, you can change the perspective to the &quot;Debug&quot; perspective. (A perspective is a different way of presenting your code in Eclipse.) If you don't see the little arrows, you might see a small box with a plus sign on it, to the left of the word &quot;PyDev&quot;. Click that box and select &quot;Debug&quot; from the dialog that opens.</p>
<p>You should now see several windows. Here, we'll focus on just the main source code window and the window in the upper-right corner that shows variable values.</p>
<p>Python code runs too fast for you to follow it. The debugging tool lets you stop your code at a particular place, and then run one line of code at a time, while you watch the variable values and the program counter. In the source code window, you need to specify where to initially stop, using a <strong>breakpoint</strong>: a place in your program where the debugger will stop once the program counter gets there, giving you control at that time. Double-clicking in the main source code window to the right of your program (where the line numbers show up) lets you set a breakpoint. Set a breakpoint on a line where there is actual code, not a blank line or a comment.</p>
<p>Now you need to start your program. Next to the green &quot;run&quot; arrow that you may use to run your program is a little insect-like shape, indicating the debugging tool. Click that, and your program will run as usual until the program counter reaches the line containing the breakpoint.</p>
<p>Your program will now temporarily stop. The line of code with the breakpoint is highlighted with a gray background. This line of code is where the program counter currently is. The window in the upper right will show you the names and values of available variables.</p>
<p>You can step to the next line of code with the &quot;step over&quot; button. It's a little arrow near the top of your Eclipse window, roughly in the center. There is also a &quot;step into&quot; button. &quot;Step over&quot; executes entire functions if there is a function call, without stopping until the function returns. &quot;Step into&quot; follows the program counter as the program counter moves into the executing function. If you don't know which button is which, let the cursor hover over the buttons until you see the tool tips.</p>
<p>Using the debugging tool is really good practice to see exactly how your program behaves as it is executed, and you should get into the habit of running the debugger on your code frequently.</p>
<p>Debugging a graphical program is a little trickier. There are things happening behind the scenes to draw the window. Try to set up your Eclipse window so that you can see the graphics window as the program is executing. (You can use the resume button, which looks like the play button on a CD player, to continue running the program until it reaches another breakpoint.) Also notice that the window might look ugly because it is not being redrawn quickly as you step through the program. That's OK.</p>
<h2 id="good-programming-practice-know-what-type-of-value-your-function-can-return">Good programming practice: Know what type of value your function can return</h2>
<p>A function can return any type of data that Python uses: a string, an int, a float, a boolean, or other types that we will see later in the course. In Python, the only way to know what type a function returns is to read the documentation, or to read the source code (UTSL—Use The Source, Luke) and check the return-statements. Some would argue that this is a weakness of the Python language design; other languages (including Java) force the programmer to explicitly declare what type a function returns.</p>
<p>Here's an example of where things can go wrong. Both of these statements</p>
<ol style="list-style-type: decimal">
<li><code>return sqrt(4.0) + 2</code></li>
<li><code>return 24 / 4 - 2</code></li>
</ol>
<p>seem to compute the value four. But one statement computes 4, and one computes 4.0. This means that the functions <code>compute_four</code> and <code>calculate_four</code> defined above are subtly different. See how this plays out in the program <a href="compute_four.py">compute_four.py</a>:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> math <span class="ch">import</span> sqrt<br /><br /><span class="kw">def</span> compute_four():<br />    <span class="kw">print</span> <span class="st">&quot;Your wish is my command!  I compute four!&quot;</span><br />    <span class="kw">return</span> <span class="dv">24</span> / <span class="dv">4</span> - <span class="dv">2</span><br /><br /><span class="kw">def</span> calculate_four():<br />    <span class="kw">print</span> <span class="st">&quot;Your wish is my command!  I compute four!&quot;</span><br />    <span class="kw">return</span> sqrt(<span class="fl">4.0</span>) + <span class="dv">2</span><br /><br /><span class="kw">print</span> <span class="st">&quot;Result of compute_four():&quot;</span>, compute_four()<br /><span class="kw">print</span> <span class="st">&quot;Result of calculate_four():&quot;</span>, calculate_four()<br /><span class="kw">print</span> <span class="dv">33</span> / compute_four()    <span class="co"># prints 8</span><br /><span class="kw">print</span> <span class="dv">33</span> / calculate_four()  <span class="co"># prints 8.25</span></code></pre>
<p>So make sure that when you write a function that you are clear on what type of value you intend it to return. When you use a function from a library, one of the first questions you should ask is what type of value it returns, if any.</p>
<h2 id="side-effects-of-functions">Side effects of functions</h2>
<p>In mathematics, functions <em>only</em> compute values. Mathematical functions don't print things on the screen, draw circles, or vacuum the floors. Python functions can do all these things. In Python, functions can do a lot more than return values, as we have already seen. A <strong>side effect</strong> of a function is any result of a function other than the return of a value.</p>
<p>The print statements in the <code>compute_four</code> and <code>calculate_four</code> functions above cause the side effect that sentences are printed on the screen when the functions are called. Side effects can be very useful. A side effect might even be the main purpose of a function. The <code>draw_circle</code> function from the last lecture doesn't compute a value. But as a side effect of running the function, a circle gets drawn on the screen.</p>
<p>Side effects also mean that the order in which functions are called in an expression can matter. A lot. Even though we know that by commutativity, 4 + 4.0 and 4.0 + 4 both evaluate to 8.0, swapping the order of the function calls as below will change the output of the program:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">print</span> compute_four() + calculate_four()</code></pre>
<p>To understand these programs, you will need to think like a computer, and step through each line of code carefully to make sure you understand the order in which lines of code are executed.</p>
<p>Side effects of functions are particularly interesting when combined with short-circuiting of the <code>and</code> and <code>or</code> boolean operators. One of the robot functions I did not tell you about was <code>destroy_the_world()</code>. It has a particularly deleterious side effect. Let's try it.</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="ch">from</span> robotlib <span class="ch">import</span> destroy_the_world<br /><br /><span class="kw">print</span> <span class="ot">False</span> and destroy_the_world()</code></pre>
<p>Since False short-circuits the <code>and</code> operator, the <code>destroy_the_world</code> function is never called. Presumably, that's good.</p>
<h2 id="putting-it-all-together">Putting it all together</h2>
<p>Here is an example of a program. <a href="prime.py">prime.py</a>, that defines a function that takes a parameter, does some computations, and returns a value (in this case, a boolean value). The program contains a &quot;generate-and-test&quot; step. For a possible prime, generate possible factors, and test to see whether each is actually a factor. If you don't find any factors, then the number is prime.</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="co">## Program to check if a number is prime</span><br /><span class="co">## Devin Balkcom</span><br /><span class="co">## July 2011</span><br /><br /><span class="ch">from</span> math <span class="ch">import</span> sqrt<br /><br /><span class="co"># Check if a value is prime, and return True or False.</span><br /><span class="kw">def</span> is_prime(possible_prime): <br />    <span class="co"># Check if the input to the function is reasonable.</span><br />    <span class="kw">assert</span> <span class="dt">type</span>(possible_prime) == <span class="dt">int</span><br />    <span class="kw">assert</span> possible_prime &gt; <span class="dv">0</span><br /><br />    <span class="co"># A number is prime if it has no integer divisors</span><br />    <span class="co"># greater than the square root of the number.</span><br /><br />    max_factor = <span class="dt">int</span>(sqrt(possible_prime)) <br /><br />    <span class="co"># Loop over all possible factors less than or equal to</span><br />    <span class="co"># the max that we need to check.</span><br />    factor = <span class="dv">2</span><br />    <span class="kw">while</span> factor &lt;= max_factor:<br />        <span class="kw">if</span> possible_prime % factor == <span class="dv">0</span>:<br />            <span class="co"># It's divisible by factor, and therefore is not prime.</span><br />            <span class="kw">return</span> <span class="ot">False</span><br />        factor = factor + <span class="dv">1</span><br /><br />    <span class="co"># The while loop completed, so no integer factors were found.</span><br />    <span class="co"># It's a prime!</span><br />    <span class="kw">return</span> <span class="ot">True</span><br /><br />value = <span class="dv">22</span><br /><span class="kw">if</span> is_prime(value):<br />    <span class="kw">print</span> <span class="dt">str</span>(value) + <span class="st">&quot; is prime!&quot;</span><br /><span class="kw">else</span>:<br />    <span class="kw">print</span> <span class="dt">str</span>(value) + <span class="st">&quot; is not prime!&quot;</span><br /><br /><span class="co"># This call should cause an assertion error.</span><br /><span class="kw">print</span> is_prime(<span class="st">&quot;rib&quot;</span>)<br /><br /><span class="co"># So should this call.</span><br /><span class="kw">print</span> is_prime(-<span class="dv">3</span>)</code></pre>
<p>In the definition of <code>is_prime</code>, the formal parameter is the variable <code>possible_prime</code>. When <code>is_prime</code> is called, the value 22 is <em>copied</em> into the formal parameter <code>possible_prime</code>. Then the body of the function <code>is_prime</code> can use that variable <code>possible_prime</code> (now containing the value 22).</p>
<p>The value 22 in <code>is_prime(22)</code>is the actual parameter. The variable <code>possible_prime</code> used in the function is the formal parameter. The value passed by the function call is the value of the actual parameter.</p>
<h3 id="good-programming-practice-check-that-parameter-values-are-reasonable">Good programming practice: Check that parameter values are reasonable</h3>
<p>What would happen if the function <code>is_prime</code> was passed the string <code>&quot;rib&quot;</code> as the actual parameter? It seems like whoever wrote the line of code <code>is_prime(&quot;rib&quot;)</code> perhaps did not understand the point of our function. What about <code>is_prime(3.14)</code>? Or <code>is_prime(-7)</code>? We just didn't design our function to deal with these cases.</p>
<p>We can design our function to check that the values are reasonable and quit the program if not. The huge benefit of checking for reasonable values is that it is easier to catch bugs earlier than later. We <em>want</em> our program to crash if there is a mistake, like passing something that is not even a positive integer to <code>is_prime</code>. It is way better for a program to crash than to quietly give a wrong answer.</p>
<p>You could argue in a court of law that 3.14 is not a prime, since it is not an integer, and that we should therefore return <code>False</code> rather than crashing the program. You might even win the case. However, if someone passes 3.14 to the <code>is_prime</code> function it's a darn good bet that they made a simple mistake. The safest thing is to alert the programmer to that fact, so that it can be corrected. Nothing grabs a programmer's attention like a program crash.</p>
<p>A good way to check if a value is what we expect it to be is to use Python's <code>assert</code> statement. <code>assert</code> takes a boolean value, either <code>True</code> or <code>False</code>. If the value is <code>True</code>, then <code>assert</code> does nothing and lets your program go its merry way. If, however, the value is <code>False</code>, <code>assert</code> quits the program and prints the line number where the failed assertion occurred.</p>
<p>Here's an example from the primes program:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">assert</span> possible_prime &gt; <span class="dv">0</span> </code></pre>
<p>We can also check that the type of the variable is reasonable. <code>is_prime(&quot;beef&quot;)</code> seems like an incorrect usage, since the actual parameter is a string when it should be an int. Python has a function called <code>type</code>, which returns the type of the parameter passed to it. In the case of determining whether a number is prime, only an int will do, so we use the line</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">assert</span> <span class="dt">type</span>(possible_prime) == <span class="dt">int</span></code></pre>
<p>Carefully ensuring that all parameters are of the correct type and value does take more time for the programmer, and it is a judgement call how many such checks are the right number. Still, it is worth some effort to consider probable mistakes that programmers might make when using your function, and to try to check for at least those most common problems.</p>
</body>
</html>
