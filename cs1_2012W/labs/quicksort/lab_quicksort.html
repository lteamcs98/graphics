<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre 
   { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; }
td.lineNumbers { border-right: 1px solid #AAAAAA; text-align: right; color: #AAAAAA; padding-right: 5px; padding-left: 5px; }
td.sourceCode { padding-left: 5px; }
code.sourceCode span.kw { color: #007020; font-weight: bold; } 
code.sourceCode span.dt { color: #902000; }
code.sourceCode span.dv { color: #40a070; }
code.sourceCode span.bn { color: #40a070; }
code.sourceCode span.fl { color: #40a070; }
code.sourceCode span.ch { color: #4070a0; }
code.sourceCode span.st { color: #4070a0; }
code.sourceCode span.co { color: #60a0b0; font-style: italic; }
code.sourceCode span.ot { color: #007020; }
code.sourceCode span.al { color: red; font-weight: bold; }
code.sourceCode span.fu { color: #06287e; }
code.sourceCode span.re { }
code.sourceCode span.er { color: red; font-weight: bold; }
/*]]>*/
  </style>
</head>
<body>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

<link rel="stylesheet" href="http://www.cs.dartmouth.edu/~cs1/azul.css" type="text/css" />


<div id = "menubar">
<ul>
<li><a href="http://www.cs.dartmouth.edu/~cs1/syllabus.html">Syllabus</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/schedule.html">Schedule</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/shortassign/short_assignments.html">Short assignments</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/labs/lab_assignments.html">Labs</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/exams.html">Exams</a>
<li><a href="http://www.cs.dartmouth.edu/~cs1/software.html">Course software</a>
<li> <a href="http://greenteapress.com/thinkpython/thinkpython.html">Book</a>
<li><A HREF="&#109;&#97;&#105;&#108;&#116;&#111;&#58;%63%73%31%68%65%6C%70%40%63%73%2E%64%61%72%74%6D%6F%75%74%68%2E%65%64%75">Get help</A>
</ul>
</div>

<div id = "termtitle"> CS 1:  Winter 2012 </div> 
<h1 id="lab-assignment-3-sorting-it-all-out-due-monday-february-20">Lab Assignment 3: Sorting it all out <br />Due: Monday, February 20</h1>
<p>Computer science is about a lot more than handling data, but computers are still a very useful tool for working with large amounts of data. Scientific experiments in biology, chemistry, physics, and psychology can generate huge numbers of measurements. In economics, business, or politics, data can be generated by everything from stock prices, to poll results, to voting records of congressmen. In this lab, you'll read data from a file (you'll have practice doing so in <a href="../../shortassign/file/sa_file.html">Short Assignment 10</a>), how to organize that data using a class, how to write an algorithm to manipulate the data, and how to visualize your result.</p>
<p>Several sorting algorithms have been presented to you in lecture and in section: selection sort and merge sort in lecture, and insertion sort in <a href="../../shortassign/insertion/sa_insertion.html">Short Assignment 9</a>). One part of this assignment will ask you to implement quicksort. Quicksort has a worst-case run time of $O(n^2) (worse than merge sort), but the worst case for quicksort occurs rarely—rarely enough that on average, it runs in <span class="math"><em>O</em>(<em>n</em> log <em>n</em>)</span> time. Quicksort has two advantages over merge sort: the constants are better, and quicksort runs &quot;in place&quot;: no temporary lists have to be created, and so very little additional memory is required to quicksort. (Side note: although I've said that constant factors hidden in big-Oh notation do not usually matter, if two algorithms have similar running times when expressed in big-Oh notation, it is nice to use the algorithm with the smaller constants.)</p>
<p>Now, you might ask why you need to implement quicksort when Python has a sorting method built in and when you've already learned three other sorting algorithms. That's a fair question, but if the professors who taught the Python designers had let them skip sorting, we wouldn't have such a nice built-in sort function in Python. I won't let you skip learning how to sort, either!</p>
<p>First, I'll describe the quicksort algorithm, then I'll dissect the data you will be sorting, and finally, I'll show you how I want you to present your results.</p>
<p>Read the whole assignment before you start, but you can tackle it in any order you like. For example, you might like to implement quicksort first, and test it by sorting lists of numbers. Or you might prefer to work on reading the data in from a file first. In either case, make a plan, start early, and test as you go.</p>
<h2 id="quicksort">Quicksort</h2>
<p>Like merge sort, quicksort uses the paradigm of divide-and-conquer, and hence it's recursive. As in merge sort, the problem is to sort a sublist <code>the_list[p : r+1]</code>, which consists of the items starting at <code>the_list[p]</code> and going through <code>the_list[r]</code>. (Recall again that in Python's slice notation, the number after the colon is the index of the first item <em>not</em> in the sublist.) Initially, <code>p</code> equals 0 and <code>r</code> equals <code>len(the_list)-1</code>, but these values will change through the recursive calls.</p>
<ul>
<li><p><strong>Divide:</strong> Choose any item within the sublist <code>the_list[p : r+1]</code>. Store this item in a variable named <code>pivot</code>. <strong>Partition</strong> <code>the_list[p : r+1]</code> into two sublists <code>the_list[p:q]</code> and <code>the_list[q+l : r+1]</code> (note that <code>the_list[q]</code> is in neither of these sublists) with the following properties:</p>
<ol style="list-style-type: decimal">
<li>Each item in <code>the_list[p:q]</code> is less than or equal to the value of <code>pivot</code>.</li>
<li>The value of <code>pivot</code> is in <code>the_list[q]</code>.</li>
<li>Each item in <code>the_list[q+1 : r+1]</code> is greater than the value of <code>pivot</code>.</li>
</ol></li>
<li><p><strong>Conquer</strong>: Recursively sort the two sublists <code>the_list[p:q]</code> and <code>the_list[q+l : r+1]</code>.</p></li>
<li><p><strong>Combine</strong>: Do nothing! The recursive step leaves the entire sublist <code>the_list[p : r+1]</code> sorted. Why? Because the sublists <code>the_list[p:q]</code> and <code>the_list[q+l : r+1]</code> are each sorted, each item in <code>the_list[p:q]</code> is at most the value of <code>pivot</code>, which is in <code>the_list[q]</code>, and each item in <code>the_list[q+1 : r+1]</code> is greater than <code>pivot</code>. The sublist <code>the_list[p : r+1]</code> can't help but be sorted!</p></li>
</ul>
<p>The base case is the same as for merge sort: a sublist with fewer than two items is already sorted.</p>
<h3 id="partitioning">Partitioning</h3>
<p>It doesn't take much thought to see that all the work in quicksort occurs in the partitioning step, so let's see how to do that. You will write a procedure with the following header:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> partition(the_list, p, r, compare_func):</code></pre>
<p>This procedure should partition the sublist <code>the_list[p : r+1]</code>, and it should return an index <code>q</code> into the list, which is where it places the item chosen as the pivot. As a running example, we'll suppose that the current sublist to be sorted is <code>[2, 8, 7, 1, 3, 5, 6, 4]</code>, so that <code>the_list[p]</code> contains 2 and <code>the_list[r]</code> contains 4.</p>
<p>First, we need to select an item as <code>pivot</code>. Let's always select the last item in the sublist, that is, <code>the_list[r]</code>. In our example, we select 4 as the value of <code>pivot</code>. When we're done partitioning, we could have any of several results. Here are three of them:</p>
<pre><code>[3, 2, 1, 4, 7, 8, 6, 5]
[1, 3, 2, 4, 8, 7, 5, 6]
[2, 1, 3, 4, 6, 8, 5, 7]
</code></pre>
<p>Several more are possible, but what matters is that 4 is in the position it would be in if the sublist were sorted, all items before 4 are less than or equal to 4, and all items after 4 are greater than 4.</p>
<p>We want to partition the sublist <em>efficiently</em>. (Remember that we're in the part of the course where not only do we want right answers, but we want to use resources—especially time—parsimoniously.) If the sublist contains <span class="math"><em>n</em></span> items, we might have to move each one, and so <span class="math"><em>O</em>(<em>n</em>)</span> time for partitioning an <span class="math"><em>n</em></span>-item sublist is the best we can hope for. Indeed, we can achieve <span class="math"><em>O</em>(<em>n</em>)</span> time. This picture gives you an idea of how:</p>
<div class="figure">
<img src="partition-example.png" /><p class="caption"></p>
</div>
<p>You can also look at <a href="Partition.ppt">this PowerPoint</a>.</p>
<p>The idea is to loop through the items in <code>the_list[p:r]</code> (which does not include <code>the_list[r]</code>, the value of <code>pivot</code>.) Maintain two indices, <span class="math"><em>i</em></span> and <span class="math"><em>j</em></span>, into the sublist:</p>
<div class="figure">
<img src="partition-structure.png" /><p class="caption"></p>
</div>
<p>At the start of each loop iteration, for any index <span class="math"><em>k</em></span> into the sublist:</p>
<ol style="list-style-type: decimal">
<li>If <span class="math"><em>p</em> ≤ <em>k</em> ≤ <em>i</em></span>, then <code>the_list[k]</code> <span class="math"> ≤ </span> <code>pivot</code>.</li>
<li>If <span class="math"><em>i</em> + 1 ≤ <em>k</em> ≤ <em>j</em> - 1</span>, then <code>the_list[k]</code> &gt; <code>pivot</code>.</li>
<li>If <span class="math"><em>j</em> ≤ <em>k</em> ≤ <em>r</em> - 1</span>, then we have yet to compare <code>the_list[k]</code> with <code>pivot</code>, and so we don't yet know which is greater.</li>
<li>If <span class="math"><em>k</em> = <em>r</em></span>, then <code>the_list[k]</code> equals <code>pivot</code>.</li>
</ol>
<p>Start with <span class="math"><em>i</em> = <em>p</em> - 1</span> and <span class="math"><em>j</em> = <em>p</em></span>. There are no indices between <span class="math"><em>p</em></span> and <span class="math"><em>i</em></span>, and there are no indices between <span class="math"><em>i</em> + 1</span> and <span class="math"><em>j</em> - 1</span>, and so the above conditions must hold: all indices <span class="math"><em>k</em></span> between <span class="math"><em>j</em></span> and <span class="math"><em>r</em> - 1</span> have yet to be compared with <code>pivot</code>. Set <code>pivot = the_list[r]</code> to satisfy the last condition.</p>
<p>Each iteration of the loop finds one of two possibilities:</p>
<ul>
<li><p><code>the_list[j]</code> &gt; <code>pivot</code>:</p>
<div class="figure">
<img src="partition-one-step-gt.png" /><p class="caption"></p>
</div>
<p>All you need to do is increment <span class="math"><em>j</em></span>. Afterward, condition 2 holds for <code>the_list[j-1]</code>, and all other items remain unchanged.</p></li>
<li><p><code>the_list[j]</code> ≤ <code>pivot</code>:</p>
<div class="figure">
<img src="partition-one-step-le.png" /><p class="caption"></p>
</div>
<p>In this case, you need to increment <span class="math"><em>i</em></span>, swap the values in <code>the_list[i]</code> and <code>the_list[j]</code>, and then increment <span class="math"><em>j</em></span>. Because of the swap, we now have that <code>the_list[i]</code> ≤ <code>pivot</code>, and condition 1 is satisfied. Similarly, we also have that <code>the_list[j-1]</code> &gt; <code>pivot</code>, since the item that was swapped into <code>the_list[j-1]</code> is, by condition 2, greater than <code>pivot</code>.</p></li>
</ul>
<p>The loop should terminate immediately upon <span class="math"><em>j</em></span> equaling <span class="math"><em>r</em></span>. To be clear: the last time that the loop body should execute is for <span class="math"><em>j</em> = <em>r</em> - 1</span>. The loop body should <em>not</em> execute when <span class="math"><em>j</em> = <em>r</em></span>.</p>
<p>Once <span class="math"><em>j</em></span> equals <span class="math"><em>r</em></span>, every sublist item before <code>the_list[r]</code> has been compared with <code>pivot</code> and is in the right place. All that remains is to put the pivot, currently in <code>the_list[r]</code> into the right place. Do so by swapping it with the item in <code>the_list[i+1]</code>, which is the leftmost item in the partition known to be greater than <code>pivot</code>. (If the greater-than partition happens to be empty, then this swap should just swap <code>the_list[r]</code> with itself, which is fine in this case.)</p>
<p>Your <code>partition</code> procedure should return to its caller the <em>index</em> <code>q</code> where it has placed <code>pivot</code>.</p>
<p>The procedure <code>compare_func</code> will be one that you write and pass in. It takes two parameters, say <code>a</code> and <code>b</code>, and it returns <code>True</code> if <code>a</code> compares as less than or equal to <code>b</code>, and it returns <code>False</code> if <code>a</code> compares as greater than <code>b</code>. For example, the call <code>compare_func(3, 5)</code> should return <code>True</code>, the call <code>compare_func(7, 5)</code> should return <code>False</code>, the call <code>compare_func(5, 5)</code>, should return <code>True</code>, the call <code>compare_func(&quot;Tallahassee&quot;, &quot;Tokyo&quot;)</code> should return <code>True</code>, and the call <code>compare_func(&quot;Boise&quot;, &quot;Bismarck&quot;)</code> should return <code>False</code>. Your <code>partition</code> procedure should call <code>compare_func</code> to compare each sublist item with <code>pivot</code>.</p>
<p>You should implement and test your <code>partition</code> procedure before writing any other code. Make sure that it works on an arbitrary sublist of <code>the_list</code>, and not just the sublist where <span class="math"><em>p</em> = 0</span> and $r = $ <code>len(the_list)-1</code>. You'll have to write the <code>compare_func</code> function as well, and design it so that it works on whatever data type <code>the_list</code> contains. You should certainly test <code>partition</code> on lists containing numbers and on lists containing strings.</p>
<p>I was able to write the body of the <code>partition</code> procedure in 10 lines of Python code (not counting comment lines). I wrote a separate function to swap items in the sublist; the calls of this function count toward the 10 lines but the body of the swap function does not.</p>
<h3 id="the-quicksort-procedure">The <code>quicksort</code> procedure</h3>
<p>Once you have the <code>partition</code> procedure written and tested, you should write a procedure with the header</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> quicksort(the_list, p, r, compare_func):</code></pre>
<p>which sorts the sublist <code>the_list[p : r+1]</code>, whose first item is in <code>the_list[p]</code> and whose last item is in <code>the_list[r]</code>.</p>
<p>It should work as described above:</p>
<ul>
<li><p>The base case occurs when the sublist has fewer than two items. Nothing needs to be done.</p></li>
<li><p>Otherwise, call the <code>partition</code> procedure to partition the sublist. The call will return an index <code>q</code>, indicating that it has placed the pivot item in <code>the_list[q]</code>.</p></li>
<li><p>Recursively call <code>quicksort</code> on the sublist starting at index <code>p</code> and going up to, <em>but not including</em>, index <code>q</code>. Recursively call <code>quicksort</code> on the sublist starting at the index just past <code>q</code> and going up to <em>and including</em> index <code>r</code>.</p></li>
</ul>
<p>The body of my <code>quicksort</code> function takes only 4 lines of Python, not counting comment lines.</p>
<h3 id="the-sort-procedure">The <code>sort</code> procedure</h3>
<p>Unlike the examples from lecture, you'll write a separate procedure named <code>sort</code> in this lab assignment. It has this header:</p>
<pre class="sourceCode"><code class="sourceCode python"><span class="kw">def</span> sort(the_list, compare_func):</code></pre>
<p>It simply makes a call to the <code>quicksort</code> function to sort the entire list referenced by <code>the_list</code>.</p>
<p><strong>Place the <code>partition</code>, <code>quicksort</code>, and <code>sort</code> functions in a single file named quicksort.py. Include in this file any other functions that your quicksort code calls, but not the comparison functions described below.</strong></p>
<h2 id="what-to-sort">What to sort</h2>
<p>You will sort information contained in a file of world cities. Download the file <a href="world_cities.txt">world_cities.txt</a>, and drag it into your project in Eclipse. This file contains 47913 lines, each line giving information about a city somewhere in the world.</p>
<p>In each line, you'll find six fields, separated by commas. In order:</p>
<ol style="list-style-type: decimal">
<li>A two-letter country code.</li>
<li>The name of the city.</li>
<li>A two-character region code. It might be two digits, two letters, or one letter followed by one digit.</li>
<li>The city's population, as the string representation of an integer.</li>
<li>The city's latitude, in degrees, as the string representation of a float.</li>
<li>The city's longitude, in degrees, as the string representation of a float.</li>
</ol>
<p>You will read in each line of the file and store all of its information in a <code>City</code> object that you define. Create a list of references to all the <code>City</code> objects, which you will sort.</p>
<p>Your <code>City</code> class needs only two methods:</p>
<ul>
<li><p><code>__init__</code> initializes all the instance variables for the <code>City</code> object. There should be at least six instance variables, corresponding to the six information fields in each line of the file.</p></li>
<li><p><code>__str__</code> converts the <code>City</code> object to a string. The string <em>must</em> have the following format: name,population,latitude,longitude</p>
<p>There should be no spaces around the commas. For example, the first line of <a href="world_cities.txt">world_cities.txt</a> contains the line</p>
<pre><code>ad,Andorra La Vella,07,20430,42.5,1.5166667
</code></pre>
<p>When you read in this line, store its information in a <code>City</code> object, and convert that <code>City</code> object to a string, the string should look like</p>
<pre><code>Andorra La Vella,20430,42.5,1.5166667
</code></pre></li>
</ul>
<p>Your <code>City</code> class should reside in a file named city.py, and it should be the only code in that file.</p>
<p>Your program should read in <a href="world_cities.txt">world_cities.txt</a>, create a list of references to properly initialized <code>City</code> objects, sort them, and write to a file the sorted cities as converted to strings, one line per city.</p>
<p>Produce three output files:</p>
<ol style="list-style-type: decimal">
<li>cities_alpha.txt contains the list of cities sorted alphabetically.</li>
<li>cities_population.txt contains the list of cities sorted by population, from most to least populous.</li>
<li>cities_latitude.txt contains the list of cities sorted by latitude, from south to north.</li>
</ol>
<p>Here are the first and last few lines of each of the files, when I ran my program:</p>
<ol style="list-style-type: decimal">
<li><p>For cities_alpha.txt:</p>
<pre><code>A,1145,63.966667,10.2
A,1145,63.966667,10.216667
A Coruna,236010,43.366667,-8.383333
A Dos Cunhados,6594,39.15,-9.3
Aabenraa,16344,55.033333,9.433333
Aabybro,4849,57.15,9.75
Aachen,251104,50.770833,6.105278
Aadorf,7100,47.483333,8.9
Aakirkeby,2195,55.066667,14.933333
Aakre,295,58.1013889,26.1944444
...
Zychlin,8844,52.25,19.616667
Zykovo,1059,54.0666667,45.1
Zykovo,5365,55.9519444,93.1461111
Zyrardow,41179,52.066667,20.433333
Zyryanka,3627,65.75,150.85
Zyryanovsk,44939,49.738611,84.271944
Zyryanovskiy,896,57.7333333,61.7
Zyryanskoye,6285,56.8333333,86.6222222
Zyukayka,4556,58.2025,54.7002778
Zyuzelskiy,1311,56.4852778,60.1316667
</code></pre></li>
<li><p>For cities_population.txt:</p>
<pre><code>Tokyo,31480498,35.685,139.7513889
Shanghai,14608512,31.005,121.4086111
Bombay,12692717,18.975,72.825833
Karachi,11627378,24.866667,67.05
New Delhi,10928270,28.6,77.2
Delhi,10928270,28.666667,77.216667
Manila,10443877,14.604167,120.982222
Moscow,10381288,55.7522222,37.6155556
Seoul,10323448,37.5663889,126.9997222
Sao Paulo,10021437,-23.533333,-46.616667
...
Girsterklaus,12,49.7777778,6.4994444
Vstrechnyy,12,67.95,165.6
Qallimiut,12,60.7,-45.3333333
Skaelingur,11,62.1,-7.0
Ivittuut,11,61.2,-48.1666667
Crendal,10,50.0577778,5.8980556
El Porvenir,10,9.5652778,-78.9533333
Schleif,8,49.9905556,5.8575
Aliskerovo,7,67.7666667,167.5833333
Neriunaq,7,64.4666667,-50.3166667
Tasiusaq,7,73.3666667,-56.05
Timerliit,7,65.8333333,-53.25
</code></pre></li>
<li><p>For cities_latitude.txt:</p>
<pre><code>Ushuaia,58045,-54.8,-68.3
Punta Arenas,117432,-53.15,-70.9166667
Rio Gallegos,93234,-51.6333333,-69.2166667
Port-Aux-Francais,45,-49.35,70.2166667
Bluff,1938,-46.6,168.333333
Owaka,395,-46.45,169.666667
Invercargill,47287,-46.4,168.35
Woodlands,285,-46.366667,168.55
Riverton,1651,-46.35,168.016667
Wyndham,586,-46.333333,168.85
Wallacetown,638,-46.333333,168.266667
...
Kullorsuaq,408,74.5833333,-57.2
Savissivik,82,76.0233333,-65.0813889
Moriusaq,21,76.7561111,-69.8863889
Narsaq,1709,77.3025,-68.8425
Qaanaaq,616,77.4894444,-69.3322222
Qeqertat,18,77.5097222,-66.6477778
Siorapaluk,75,77.7952778,-70.7558333
Barentsburg,576,78.0666667,14.2333333
Longyearbyen,1232,78.2166667,15.6333333
Ny-Alesund,40,78.9333333,11.95
</code></pre></li>
</ol>
<p>A couple of things you should note:</p>
<ul>
<li><p>When comparing city names, watch out for lowercase and uppercase letters. All uppercase letters compare as less than all lowercase letters: <code>&quot;a&quot; &lt; &quot;Z&quot;</code> evaluates to <code>False</code>. The function you use to compare city names should convert each name to either all lowercase or all uppercase before comparing. But this conversion should be <em>only</em> for the purpose of comparison. Do <em>not</em> change the city name as stored in a <code>City</code> object. Change it <em>only</em> within the comparison function.</p></li>
<li><p>When sorting by population, you want the <em>most</em> populous cities at the beginning of the output file. I can think of three ways to accomplish this goal. Let's assume that you have a function <code>compare_population(city1, city2)</code>.</p>
<ol style="list-style-type: decimal">
<li><p><code>compare_population(city1, city2)</code> returns <code>True</code> if the population of the <code>City</code> object referenced by <code>city1</code> is less than or equal to the population of the <code>City</code> object referenced by <code>city2</code>, and the resulting list is reversed before writing it out to a file.</p></li>
<li><p><code>compare_population(city1, city2)</code> returns <code>True</code> if the population of the <code>City</code> object referenced by <code>city1</code> is less than or equal to the population of the <code>City</code> object referenced by <code>city2</code>, and the resulting list is written out to a file starting from the back end.</p></li>
<li><p><code>compare_population(city1, city2)</code> returns <code>False</code> if the population of the <code>City</code> object referenced by <code>city1</code> is less than or equal to the population of the <code>City</code> object referenced by <code>city2</code>, and so the resulting list has the most populous cities first and is written out in order to a file.</p></li>
</ol></li>
</ul>
<p><strong>Write the Python code that reads in the city information, sorts it, and writes out the result, along with <em>all</em> of your comparison functions, in a single file named sort_cities.py.</strong></p>
<h2 id="visualizing-the-output">Visualizing the output</h2>
<p>Files of comma-separated data are just fine for computers, but not necessarily wetware-friendly. You will write a program that visualizes the output of your sorted cities.</p>
<p>Your program will display the image file <a href="world.png">world.png</a>:</p>
<div class="figure">
<img src="world.png" /><p class="caption"></p>
</div>
<p>Download this image file, and put it into your project in Eclipse. Your program will overlay the image with marks for the first <span class="math"><em>n</em></span> cities in an output file. For example, here's what it looks like with small orange squares for the 30 most populous cities:</p>
<div class="figure">
<img src="30-largest-cities.png" /><p class="caption"></p>
</div>
<p>I selected the world.png file specially because it uses linear scales for both latitude and longitude, and the (0, 0) spot is exactly in the middle of the image. This image is 720 pixels wide and 360 pixels high.</p>
<p>A hint for you: latitudes increase from south (bottom of the image) to north (top of the image). You just might find that fifth parameter to <code>start_graphics</code> to be of use.</p>
<p>But it's not enough to just show a static image with marks for the first <span class="math"><em>n</em></span> cities in some order. You need to show them dynamically, in an animation. For example, here's how I show the 30 most populous cities:</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/mbCUtLy6Zjo" frameborder="0" allowfullscreen></iframe>

<p>You don't have to show the city names, nor do you have to blink the marks for the cities. You may choose how you animate the cities. <strong>Show the <em>50</em> most populous cities, in order, starting from the most populous.</strong> (I've shown you the first 30.)</p>
<p><strong>Write your visualization code in a file named visualize_cities.py.</strong></p>
<h2 id="miscellaneous-reminder">Miscellaneous reminder</h2>
<p>Remember to close all files that you open once you're done reading from them or writing to them.</p>
<h2 id="grading">Grading</h2>
<p>You will be graded on the following criteria.</p>
<p>Correctness: 30 points</p>
<ul>
<li><code>partition</code> function: 8 points</li>
<li><code>quicksort</code> and <code>sort</code> functions: 8 points</li>
<li><code>City</code> class: 1 point</li>
<li>Reading the input file and writing output files: 2 points</li>
<li>Sorting alphabetically, by population, and by latitude (include all 3 output files): 3 points</li>
<li>Dynamic visualation of 50 most populous cities: 8 points</li>
</ul>
<p>Style: 10 points</p>
<ul>
<li>Clear design and organization: 6 points</li>
<li>Good variable names, function names, and comments: 2 points</li>
<li>Correct use of instance variables: 2 points</li>
</ul>
<h2 id="extra-credit-ideas">Extra credit ideas</h2>
<p>Any extra credit work should be submitted in separate Python files. Don't add extra credit work into your main solution code. These are just a few ideas; you are more than welcome to make up your own.</p>
<ul>
<li><p><strong>Randomized quicksort:</strong> 5 points.</p>
<p>The description I gave of how to partition always chooses the last item in the sublist, <code>the_list[r]</code>, as the pivot. Suppose that your worst enemy is supplying the input to quicksort. He or she could arrange the list so that the pivots selected in <code>partition</code> are always either the largest or the smallest items in the subarray. That would elicit the worst-case <span class="math"><em>O</em>(<em>n</em><sup>2</sup>)</span> behavior of quicksort.</p>
<p>But you can foil your enemy by choosing a <em>random</em> item in the sublist as the pivot. And it's easy! In each call of <code>partition</code>, first select a random index in the range from <span class="math"><em>p</em></span> to <span class="math"><em>r</em></span>, inclusive, and swap the item at this index with the item in <code>the_list[r]</code>. Then do everything that <code>partition</code> normally does: select <code>the_list[r]</code> as the pivot, compare all the other items in the sublist with the pivot, etc.</p></li>
<li><p><strong>Other maps:</strong> Up to 20 points.</p>
<p>The map I used has a linear scale in both latitude and longitude. Many other ways of mapping the world have been devised. Find one that has a good image and use that to map latitude and longitude.</p></li>
<li><p><strong>Cool visualizations:</strong> Up to 30 points.</p>
<p>Come up with a cool way to visualize the cities. For example, my way of blinking each city in red, showing the name of the city, and then showing it in solid orange would be worth 10 points.</p>
<p>I also used boldface text when displaying the city names. I had to edit the cs1lib.py file to add the function <code>set_font_bold</code> in order to get boldface text. You can download my <a href="cs1lib.py">augmented cs1lib.py</a> file.</p></li>
</ul>
<h2 id="what-to-turn-in">What to turn in</h2>
<p>Turn in the following:</p>
<ul>
<li>All of your Python code: quicksort.py, city.py, sort_cities.py, visualize_cities.py, along with any other Python files you write.</li>
<li>The output files cities_alpha.txt, cities_population.txt, and cities_latitude.txt.</li>
<li>A screenshot of your visualization of the 50 largest cities once all 50 are displayed.</li>
<li>Any other images or files needed to demonstrate extra credit.</li>
</ul>
</body>
</html>
